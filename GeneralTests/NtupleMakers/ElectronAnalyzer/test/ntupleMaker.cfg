process TEST = {
 source = PoolSource { 
    untracked vstring fileNames = {"file:Z2Tau_lep.root"}
	  untracked int32 maxEvents = 1000
          #untracked uint32 skipEvents = 4495
  }

  include "NtupleMakers/ElectronAnalyzer/test/DiElectron5_100.cff"


  include "NtupleMakers/ElectronAnalyzer/data/NewElectronsAnalyzer.cfi"

  include "RecoEgamma/EgammaElectronProducers/data/pixelMatchGsfElectrons.cff"
  include "RecoEgamma/EgammaElectronProducers/data/globalCtfElectrons.cfi"
  include "RecoEgamma/EgammaElectronProducers/data/pixelMatchGsfElectronSequence.cff"

  include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"


  ######################################################################################

  ### SeedGenerator module ###
  include "RecoTracker/TkSeedGenerator/data/GlobalMixedSeeds.cff"

  # KFTrackCandidateMaker
  include "RecoTracker/CkfPattern/data/CkfTrackCandidates.cff"
  replace CkfTrajectoryBuilder.propagatorAlong = "fwdGsfElectronPropagator"
  replace CkfTrajectoryBuilder.propagatorOpposite = "bwdGsfElectronPropagator"
  replace CkfTrajectoryBuilder.estimator = "gsfElectronChi2"
  replace CkfTrajectoryBuilder.minimumNumberOfHits = 3


  # CTF track fit with material
  #include "RecoTracker/TrackProducer/data/CTFFinalFitWithMaterial.cff"
	
  # GSF track fit with material
  include "TrackingTools/GsfTracking/data/GsfElectrons.cff"
  replace GsfElectrons.src = "ckfTrackCandidates"  
	
  #include "RecoEgamma/EgammaElectronProducers/data/globalCtfElectrons.cfi"
  include "RecoEgamma/EgammaElectronProducers/data/globalGsfElectrons.cfi"

  ######################################################################################

  #sequence globalCftElectronSeqance = {globalCtfElectrons}

  #sequence globalCtfGsfPropElectronSeqance = {globalMixedSeeds,
  #			                       ckfTrackCandidates,
  #					       ctfWithMaterialTracks,
  #                                            globalCtfElectrons
  #                                           }

  sequence globalGsfElectronSeqance = {globalMixedSeeds,
			               ckfTrackCandidates,
				       GsfElectrons,
                                       globalGsfElectrons
                                      }


  path p = { globalGsfElectronSeqance,
	     newElectronsAnalyzer
	   }
}
